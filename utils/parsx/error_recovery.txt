Сохраняем возможность откатить L токенов. 
Действия парсера и изменения состояния складываем в очередь, если в очереди больше L токенов, то применяем действия до тех пор, пока лишние токены из очереди не пропадут.
Если шаг парсера сделать невозможно:
	откатываем всю очередь, получаем до L символов в буфере восставновления.
	складываем следующие M токенов из входа в буфер.
	
	пробуем все следующие коррекции из буфера и для каждой определяем стоимость
		число токенов, которые удалось распарсить из M заданных
		
	исправления:
		удалить токен на интервале [0, L]
			+ применить одну коррекцию на интервале [0, L + M)
		вставить токен на интервале [0, L]
			+ применить одну коррекцию на интервале [0, L + M)
		заменить токен на интервале [0, L]
			+ применить одну коррекцию на интервале [0, L + M)
	